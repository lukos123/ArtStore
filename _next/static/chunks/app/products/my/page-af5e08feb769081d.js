(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[851],{265:function(e,t,r){Promise.resolve().then(r.bind(r,2482))},2482:function(e,t,r){"use strict";r.r(t);var o=r(7437),a=r(3132),s=r.n(a),n=r(2265),i=r(1590),c=r(1444),d=r(4514),l=r(2328),u=r(795),p=r(610);t.default=e=>{let{}=e,[t,r]=(0,n.useState)([]),a=(0,c.I0)(),[m,f]=(0,n.useState)(""),[_,h]=(0,n.useState)(!1),y=(0,c.v9)(e=>e.userReducer.products);return(0,n.useEffect)(()=>{(async()=>{let{user:e,err:t}=await (0,i.O8)();if(""!==t){console.log(t);return}a(p.h.edit(e)),r(e.products),f("name")})()},[]),(0,n.useEffect)(()=>{(async()=>{r(y),f("name")})()},[y]),(0,o.jsxs)(d.Z,{children:[(0,o.jsx)(u.Z,{products:t,setProducts:r,setSort:f,setSortTo:h,sort:m,sortTo:_,isMy:!0}),(0,o.jsx)("div",{className:s().products,children:t.length>0?t.map(e=>(0,o.jsx)(l.Z,{product:e},e.id)):"0 Products"})]})}},4514:function(e,t,r){"use strict";var o=r(7437),a=r(904),s=r.n(a);t.Z=e=>{let{class_for:t,children:r}=e;return(0,o.jsx)("div",{className:s().Container+" "+t,children:r})}},795:function(e,t,r){"use strict";var o=r(7437),a=r(2265),s=r(7744),n=r.n(s),i=r(7138),c=r(1444);t.Z=e=>{let{setSortTo:t,setSort:r,sortTo:s,setProducts:d,sort:l,products:u,isMy:p=!1}=e,m=(0,c.v9)(e=>e.authReducer.auth);return(0,a.useEffect)(()=>{u.length>0&&("name"===l?d(e=>[...e].sort((e,t)=>{let r=s?1:-1;return e.name.toLowerCase()<t.name.toLowerCase()?-r:e.name.toLowerCase()>t.name.toLowerCase()?r:0})):"price"===l?d(e=>[...e].sort((e,t)=>s?e.price-t.price:-((e.price-t.price)*1))):"created_time"===l&&d(e=>[...e].sort((e,t)=>{let r=new Date(e.created_at),o=new Date(t.created_at);return s?r.getTime()-o.getTime():-((r.getTime()-o.getTime())*1)})))},[s,l]),(0,o.jsxs)("div",{className:n().control,children:[(0,o.jsxs)("div",{className:n().sort,children:[(0,o.jsxs)("span",{children:["Sort by:",(0,o.jsxs)("select",{defaultValue:"name",onChange:e=>{r(e.target.value)},children:[(0,o.jsx)("option",{value:"name",children:"name"}),(0,o.jsx)("option",{value:"price",children:"price"}),(0,o.jsx)("option",{value:"created_time",children:"created time"})]})]}),(0,o.jsx)("button",{className:n().sortTo,style:{userSelect:"none"},onClick:()=>{t(!s)},children:s?"UP":"DOWN"})]}),(0,o.jsx)("div",{className:n().links,children:m?p?(0,o.jsx)(i.default,{href:"/ArtStore/products/create",children:"Add Product"}):(0,o.jsx)(i.default,{href:"/ArtStore/products/my",children:"My Products"}):""})]})}},2328:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var o=r(7437),a=r(2265),s=r(3054),n=r.n(s),i=r(1590),c=r(7138),d=function(e,t){let r=(0,a.useRef)();return(0,a.useEffect)(()=>(r.current=new IntersectionObserver((e,r)=>{e[0].isIntersecting&&t(e,r)}),e.current&&r.current.observe(e.current),()=>{r.current&&r.current.disconnect()}),[]),()=>{r.current&&e.current&&r.current.unobserve(e.current)}},l=e=>{let{product:t}=e,[r,s]=(0,a.useState)(""),l=(0,a.useRef)(null);return d(l,(e,r)=>{let o=(0,i.Gr)(t.image);o&&s(o),r.disconnect()}),(0,o.jsxs)(c.default,{ref:l,href:"/products/".concat(t.id),className:n().ProductItem,children:[(0,o.jsx)("div",{className:n().image,children:r?(0,o.jsx)("img",{src:r,alt:"image"}):(0,o.jsx)("div",{})}),(0,o.jsxs)("div",{className:n().info,children:[(0,o.jsx)("h3",{children:t.name}),(0,o.jsxs)("h2",{children:[new Date(t.created_at).toLocaleDateString()," "]}),(0,o.jsxs)("span",{children:[t.price,"$"]}),(0,o.jsx)("p",{children:t.description})]})]})}},610:function(e,t,r){"use strict";r.d(t,{h:function(){return a}});let o=(0,r(9753).oM)({name:"user",initialState:{id:-1,username:"none",description:"none",email:"none",logo:"none",products:[],comments:[],orders:[],notifications:[],cart_item_groups:[]},reducers:{edit(e,t){e.cart_item_groups=t.payload.cart_item_groups,e.comments=t.payload.comments,e.description=t.payload.description,e.email=t.payload.email,e.id=t.payload.id,e.notifications=t.payload.notifications,e.orders=t.payload.orders,e.username=t.payload.username,e.products=t.payload.products,e.logo=t.payload.logo},setUsername(e,t){e.username=t.payload},setEmail(e,t){e.email=t.payload},setDescription(e,t){e.description=t.payload},setLogo(e,t){e.logo=t.payload},addProduct(e,t){e.products.push(t.payload)},setProduct(e,t){e.products.forEach((r,o)=>{t.payload.id==r.id&&(e.products[o]=t.payload)})},addToCart(e,t){for(let r of e.cart_item_groups)if(r.main){let e=!1;for(let o of r.cart_items)if(o.id==t.payload.id){o.quantity++,e=!0;break}e||r.cart_items.push(t.payload);break}},editCartItem(e,t){for(let r of e.cart_item_groups)if(r.main){r.cart_items.forEach((e,o)=>{e.id==t.payload.id&&(r.cart_items[o]=t.payload)});break}},deleteCartItem(e,t){var r;null===(r=e.cart_item_groups.find(e=>e.main))||void 0===r||r.cart_items.forEach((e,r,o)=>{e.id==t.payload&&o.splice(r,1),console.log(e)})},deleteProduct(e,t){e.products.find((e,r,o)=>(e.id==t.payload&&o.splice(r,1),e.id==t.payload))},setCarts(e,t){e.cart_item_groups=t.payload},setOrders(e,t){e.orders=t.payload},setNotifications(e,t){e.notifications=t.payload},addComment(e,t){e.comments.push(t.payload)}}}),a=o.actions;t.Z=o},3132:function(e){e.exports={products:"page_products__IxlhC"}},904:function(e){e.exports={Container:"Container_Container__L_q4N"}},7744:function(e){e.exports={control:"Control_control__fSRW9",sort:"Control_sort__MKiA1",sortTo:"Control_sortTo___gRmQ",links:"Control_links__PTfl9"}},3054:function(e){e.exports={ProductItem:"ProductItem_ProductItem__GLwE0",image:"ProductItem_image__zqM56",wait:"ProductItem_wait__OuqfT",info:"ProductItem_info__D5OOh"}}},function(e){e.O(0,[965,728,444,753,138,590,971,23,744],function(){return e(e.s=265)}),_N_E=e.O()}]);