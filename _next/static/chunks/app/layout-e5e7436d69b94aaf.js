(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{3275:function(e,t,r){Promise.resolve().then(r.bind(r,7109)),Promise.resolve().then(r.t.bind(r,936,23)),Promise.resolve().then(r.t.bind(r,8877,23))},7109:function(e,t,r){"use strict";r.d(t,{default:function(){return E}});var a=r(7437),s=r(9193),i=r.n(s),o=r(1444),n=r(2265),l=r(3690),c=r.n(l),d=r(7138),u=r(4514),_=r(610),m=r(1590),h=r(3947),f=r(8777),p=r.n(f),x=r(2741),j=r.n(x),y=e=>{let{cart_item:t}=e,r=(0,o.I0)(),s=()=>{(async()=>{""===await (0,m.GR)(t.id)&&r(_.h.deleteCartItem(t.id))})()};return(0,a.jsxs)("div",{className:j().CartItemBlock,children:[(0,a.jsxs)("div",{className:j().name,children:[t.name," ",(0,a.jsxs)("span",{className:j().bold,children:[t.product.price*t.quantity,"$"]})]}),(0,a.jsxs)("div",{className:j().counter,children:[(0,a.jsx)("button",{onClick:()=>{(async()=>{if(t.quantity<=1)s();else{let{cart_item:e,err:a}=await (0,m.m8)(t.id,t.quantity-1);""===a&&r(_.h.editCartItem(e))}})()},children:"-"}),t.quantity,(0,a.jsx)("button",{onClick:()=>{(async()=>{let{cart_item:e,err:a}=await (0,m.m8)(t.id,t.quantity+1);""===a&&r(_.h.editCartItem(e))})()},children:"+"})]}),(0,a.jsx)("div",{className:j().delete,children:(0,a.jsx)("button",{onClick:s,children:"del"})})]})},g=r(5219),v=e=>{let{close:t}=e,r=(0,o.I0)(),s=(0,o.v9)(e=>e.userReducer.cart_item_groups),i=(0,o.v9)(e=>e.userReducer.orders.find(e=>"Not Ready"===e.status)),n=s.find(e=>e.main),l=(0,g.useRouter)();if(i)return(0,a.jsxs)("div",{className:p().Cart,children:[(0,a.jsx)("button",{onClick:()=>t(),className:p().close,children:(0,a.jsx)("div",{children:"+"})}),(0,a.jsx)("div",{className:p().info,children:"You should start order or delete order"}),(0,a.jsx)(d.default,{onClick:t,href:"/orders/buy",className:p().buy,children:"START ORDER"}),(0,a.jsx)("button",{onClick:async()=>{if(""===await (0,m.wH)()){let{user:e,err:t}=await (0,m.O8)();""===t&&r(_.h.edit(e))}},className:[p().buy,p().delete].join(" "),children:"DELETE ORDER"},"div")]});if(n){let e=0,s=0;return n.cart_items.forEach(t=>{e+=t.quantity,s+=t.quantity*t.product.price}),(0,a.jsxs)("div",{className:p().Cart,children:[(0,a.jsx)("button",{onClick:()=>t(),className:p().close,children:(0,a.jsx)("div",{children:"+"})}),(0,a.jsxs)("div",{className:p().info,children:["Quantity Products: ",e]}),(0,a.jsxs)("div",{className:p().info,children:["All Price: ",(0,a.jsxs)("span",{className:p().bold,children:[s,"$"]})]}),n&&n.cart_items.length?n.cart_items.map(e=>(0,a.jsx)(y,{cart_item:e},e.id)):"0 items",n&&n.cart_items.length?(0,a.jsx)("button",{onClick:async()=>{let e=await (0,m.bP)();if(""===e){let{user:e,err:t}=await (0,m.O8)();""===t?(r(_.h.edit(e)),l.push("/orders/buy")):console.log("err_for_user: "+t)}else console.log("err: "+e);t()},className:p().buy,children:"BUY"}):""]})}},C=r(5419),b=r.n(C),N=e=>{let{}=e;return(0,a.jsx)("img",{className:b().CartSVG,src:"/ArtStore/_next/static/media/cart-shopping-svgrepo-com.a2490d89.svg"})},k=r(7775),S=r.n(k),R=e=>{let{}=e;return(0,a.jsx)("img",{className:S().NotiSVG,src:"/ArtStore/_next/static/media/notification-svgrepo-com.1df758da.svg"})},D=e=>{let{}=e,t=(0,o.v9)(e=>e.authReducer.auth),r=(0,o.v9)(e=>e.userReducer.logo),s=(0,o.v9)(e=>e.userReducer.orders),i=(0,o.v9)(e=>e.userReducer.cart_item_groups),l=(0,o.v9)(e=>e.userReducer.notifications),[f,p]=(0,n.useState)([]),[x,j]=(0,n.useState)([]),[y,C]=(0,n.useState)([]);(0,n.useEffect)(()=>{i.forEach(e=>{e.main&&j(e.cart_items)})},[i]),(0,n.useEffect)(()=>{let e=[];l.forEach(t=>{"All made"!==t.order.status&&e.push(t)}),C(e)},[l]),(0,n.useEffect)(()=>{let e=[];s.forEach(t=>{let r=[];"All made"===t.status||r.find(e=>e===t.cart_item_group_id)||(r.push(t.cart_item_group_id),e.push(t))}),p(e)},[s]);let b=(0,g.usePathname)(),[k,S]=(0,n.useState)(!1),D=(0,o.I0)(),B=()=>{(0,m.O8)().then(e=>{let{user:t,err:r}=e;""!==r?(0,m.bi)().then(e=>{""!==e?console.log("err ",e):B()}):(D(_.h.edit(t)),D(h.Y.authTrue()))})};return(0,n.useEffect)(B,[]),(0,a.jsx)("header",{className:c().header,children:(0,a.jsxs)(u.Z,{class_for:c().container,children:[(0,a.jsx)("div",{className:"logo",children:(0,a.jsx)(d.default,{href:"/",children:(0,a.jsx)("img",{width:100,src:"https://res.klook.com/images/fl_lossy.progressive,q_65/c_fill,w_1200,h_630/w_80,x_15,y_15,g_south_west,l_Klook_water_br_trans_yhcmh3/activities/tsah7c9evnal289z5fig/%D0%A2%D0%B5%D0%BC%D0%B0%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B9%20%D0%BF%D0%B0%D1%80%D0%BA%20IMG%20Worlds%20of%20Adventure%20-%20Klook.jpg",alt:"asd"})})}),(0,a.jsx)("nav",{className:c().nav,children:(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:(0,a.jsx)(d.default,{className:"/products"==b?c().active:"",href:"/ArtStore/products",children:"Products"})}),t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("li",{children:(0,a.jsxs)(d.default,{className:"/orders"==b?c().active:"",href:"/ArtStore/orders",children:["Your Orders",f.length>0?(0,a.jsx)("div",{className:c().number,children:f.length}):""]})}),(0,a.jsx)("li",{children:(0,a.jsxs)(d.default,{className:"/orders/notification"==b?c().active:"",href:"/ArtStore/orders/notification",children:[(0,a.jsx)(R,{}),y.length>0?(0,a.jsx)("div",{className:c().number,children:y.length}):""]})}),(0,a.jsxs)("li",{style:{position:"relative"},children:[(0,a.jsxs)("button",{className:c().cart_link,onClick:()=>S(e=>!e),children:[(0,a.jsx)(N,{}),x.length>0?(0,a.jsx)("div",{className:c().number,children:x.length}):""]}),k?(0,a.jsx)(v,{close:()=>S(!1)}):""]}),(0,a.jsx)("li",{children:(0,a.jsx)(d.default,{href:"//profile",children:(0,a.jsx)("img",{height:50,src:(0,m.Gr)(r),alt:""})})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("li",{children:(0,a.jsx)(d.default,{href:"//auth/register",children:"Register"})}),(0,a.jsx)("li",{children:(0,a.jsx)(d.default,{href:"//auth/login",children:"Login"})})]}),(0,a.jsx)("li",{})]})})]})})};let B=(0,r(9753).xC)({reducer:{authReducer:h.Z.reducer,userReducer:_.Z.reducer}});var E=e=>{let{children:t}=e;return(0,a.jsxs)(o.zt,{store:B,children:[(0,a.jsx)(D,{}),(0,a.jsx)("div",{className:i().body_this,children:t})]})}},4514:function(e,t,r){"use strict";var a=r(7437),s=r(904),i=r.n(s);t.Z=e=>{let{class_for:t,children:r}=e;return(0,a.jsx)("div",{className:i().Container+" "+t,children:r})}},5219:function(e,t,r){"use strict";var a=r(1169);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},3947:function(e,t,r){"use strict";r.d(t,{Y:function(){return s}});let a=(0,r(9753).oM)({name:"auth",initialState:{auth:!1},reducers:{authTrue(e){e.auth=!0},authFalse(e){e.auth=!1}}}),s=a.actions;t.Z=a},610:function(e,t,r){"use strict";r.d(t,{h:function(){return s}});let a=(0,r(9753).oM)({name:"user",initialState:{id:-1,username:"none",description:"none",email:"none",logo:"none",products:[],comments:[],orders:[],notifications:[],cart_item_groups:[]},reducers:{edit(e,t){e.cart_item_groups=t.payload.cart_item_groups,e.comments=t.payload.comments,e.description=t.payload.description,e.email=t.payload.email,e.id=t.payload.id,e.notifications=t.payload.notifications,e.orders=t.payload.orders,e.username=t.payload.username,e.products=t.payload.products,e.logo=t.payload.logo},setUsername(e,t){e.username=t.payload},setEmail(e,t){e.email=t.payload},setDescription(e,t){e.description=t.payload},setLogo(e,t){e.logo=t.payload},addProduct(e,t){e.products.push(t.payload)},setProduct(e,t){e.products.forEach((r,a)=>{t.payload.id==r.id&&(e.products[a]=t.payload)})},addToCart(e,t){for(let r of e.cart_item_groups)if(r.main){let e=!1;for(let a of r.cart_items)if(a.id==t.payload.id){a.quantity++,e=!0;break}e||r.cart_items.push(t.payload);break}},editCartItem(e,t){for(let r of e.cart_item_groups)if(r.main){r.cart_items.forEach((e,a)=>{e.id==t.payload.id&&(r.cart_items[a]=t.payload)});break}},deleteCartItem(e,t){var r;null===(r=e.cart_item_groups.find(e=>e.main))||void 0===r||r.cart_items.forEach((e,r,a)=>{e.id==t.payload&&a.splice(r,1),console.log(e)})},deleteProduct(e,t){e.products.find((e,r,a)=>(e.id==t.payload&&a.splice(r,1),e.id==t.payload))},setCarts(e,t){e.cart_item_groups=t.payload},setOrders(e,t){e.orders=t.payload},setNotifications(e,t){e.notifications=t.payload},addComment(e,t){e.comments.push(t.payload)}}}),s=a.actions;t.Z=a},8877:function(){},9193:function(e){e.exports={body_this:"Body_body_this__8yxcP"}},2741:function(e){e.exports={CartItemBlock:"CartItemBlock_CartItemBlock__dZJDC",name:"CartItemBlock_name__NZuX7",bold:"CartItemBlock_bold__oP0oM",counter:"CartItemBlock_counter__w9uT4",delete:"CartItemBlock_delete__u0NLP"}},5419:function(e){e.exports={CartSVG:"CartSVG_CartSVG__1_1xK"}},8777:function(e){e.exports={Cart:"Cart_Cart__22kvU",bold:"Cart_bold__cgIR4",info:"Cart_info__jYfDx",buy:"Cart_buy__YknzS",delete:"Cart_delete___DLbf",close:"Cart_close__O2bgR"}},904:function(e){e.exports={Container:"Container_Container__L_q4N"}},3690:function(e){e.exports={container:"Header_container__SFBVa",header:"Header_header__sSSiY",nav:"Header_nav__5PAUe",cart_link:"Header_cart_link__4oS_l",number:"Header_number__LgzEg",active:"Header_active__7hAdY"}},7775:function(e){e.exports={NotiSVG:"NotiSVG_NotiSVG__OXRj1"}},936:function(e){e.exports={style:{fontFamily:"'__Inter_b401a0', '__Inter_Fallback_b401a0'",fontStyle:"normal"},className:"__className_b401a0"}}},function(e){e.O(0,[728,444,753,138,590,971,23,744],function(){return e(e.s=3275)}),_N_E=e.O()}]);