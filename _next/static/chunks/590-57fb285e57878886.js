"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[590],{1590:function(t,e,a){a.d(e,{Dg:function(){return b},GR:function(){return k},Gr:function(){return i},Ir:function(){return I},K0:function(){return y},O8:function(){return w},PR:function(){return d},_7:function(){return h},bD:function(){return T},bP:function(){return p},bi:function(){return l},gK:function(){return O},kS:function(){return u},lL:function(){return C},m8:function(){return m},tZ:function(){return P},uz:function(){return E},wH:function(){return j},wv:function(){return z},x4:function(){return s},xq:function(){return v},y:function(){return _},yi:function(){return S},z2:function(){return f},zG:function(){return N},zk:function(){return g}});let n="http://[2a02:a316:61b7:4f80:415:9baf:f042:4517]:5000",r="not found",o="access_token NotFound",c="NotOK";function i(t){if("none"!==t)return n+"/"+t}async function s(t,e){let a=await J("".concat(n,"/auth/login"),{username:t,password:e}),r=await a.json();return a.ok?(localStorage.setItem("access_token",r.access_token),localStorage.setItem("refresh_token",r.refresh_token),""):c}function u(){localStorage.setItem("access_token",""),localStorage.setItem("refresh_token","")}async function f(t,e,a){let r=await J("".concat(n,"/auth/register"),{username:t,email:e,password:a}),o=await r.json();return o.message?o.message:r.ok?(localStorage.setItem("access_token",o.access_token),localStorage.setItem("refresh_token",o.refresh_token),""):c}async function l(){let t;let e=null!==(t=localStorage.getItem("refresh_token"))?t:r;if(e==r)return"refresh_token NotFound";let a=await fetch("".concat(n,"/auth/refresh"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)}}),o=await a.json();return a.ok?(localStorage.setItem("access_token",o.access_token),""):c}async function w(){let{res:t,ok:e}=await F("".concat(n,"/users/main")),a=await t.json();if(!e)return{user:a,err:o};if(!t.ok){let t=await l();return""!==t?{user:a,err:t}:await w()}return{user:a,err:""}}async function d(t){let e=await K("".concat(n,"/users/").concat(t)),a=await e.json();return e.ok?{user_profile:a,err:""}:{user_profile:a,err:c}}async function h(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,{res:a,ok:r}=await A("".concat(n,"/cart"),{product_id:t,quantity:e}),i=await a.json();return r?a.ok?{cart_item:i,err:""}:""===await l()?await h(t,e):{cart_item:i,err:c}:{cart_item:i,err:o}}async function m(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,{res:a,ok:r}=await D("".concat(n,"/cart/").concat(t),{quantity:e}),i=await a.json();return r?a.ok?{cart_item:i,err:""}:""===await l()?await m(t,e):{cart_item:i,err:c}:{cart_item:i,err:o}}async function k(t){let{res:e,ok:a}=await B("".concat(n,"/cart/").concat(t));return(await e.json(),a)?e.ok?"":""===await l()?await k(t):c:o}async function p(){let{res:t,ok:e}=await A("".concat(n,"/cart/order")),a=await t.json();return e?t.ok&&"Start order"===a.message?"":""===await l()?await p():c:o}async function g(){let{res:t,ok:e}=await F("".concat(n,"/cart/order/all")),a=await t.json();return e?t.ok?{orders:a,err:""}:""===await l()?await g():{orders:a,err:c}:{orders:a,err:o}}async function y(t,e,a){let{res:r,ok:i}=await A("".concat(n,"/cart/order/finish/client"),{order_id:t,delivery:e,delivery_to:a}),s=await r.json();return i?r.ok&&"Finish order"===s.message?"":""===await l()?await y(t,e,a):c:o}async function j(){let{res:t,ok:e}=await B("".concat(n,"/cart/order/")),a=await t.json();return e?t.ok&&"Order deleted"===a.message?"":""===await l()?await j():c:o}async function _(t){let{res:e,ok:a}=await A("".concat(n,"/cart/order/finish/supplier"),{order_id:t}),r=await e.json();return a?e.ok&&"Finish order"===r.message?"":""===await l()?await _(t):c:o}async function S(t,e){let a={order_id:t};e&&(a.item_id=e);let{res:r,ok:i}=await A("".concat(n,"/cart/order/confirm"),a),s=await r.json();return i?r.ok&&"Confirm order"===s.message?"":""===await l()?await S(t,e):c:o}async function T(){let{res:t,ok:e}=await F("".concat(n,"/notification")),a=await t.json();return e?t.ok?{notifications:a,err:""}:""===await l()?await T():{notifications:a,err:c}:{notifications:a,err:o}}async function b(){let t=await K("".concat(n,"/products")),e=await t.json();return t.ok?{products:e,err:""}:{products:e,err:c}}async function z(t){let e=await K("".concat(n,"/products/").concat(t)),a=await e.json();return e.ok?{product:a,err:""}:{product:a,err:c}}async function I(t,e){let{res:a,ok:r}=await A("".concat(n,"/products/").concat(t,"/comments"),{text:e}),i=await a.json();return r?a.ok?{comment:i,err:""}:""===await l()?await I(t,e):{comment:i,err:c}:{comment:i,err:o}}async function O(t,e,a){let r={name:t,price:e};a&&(r.description=a);let{res:i,ok:s}=await A("".concat(n,"/products"),r),u=await i.json();return u.massage?{product:u,err:u.massage}:s?i.ok?{product:u,err:""}:""===await l()?await O(t,e,a):{product:u,err:c}:{product:u,err:o}}async function C(t,e){let a=new FormData;a.append("file",e);let{res:r,ok:i}=await G("".concat(n,"/products/image/").concat(t),a),s=await r.json();return i?r.ok?{image:s.image,err:""}:""===await l()?await C(t,e):{image:s.image,err:c}:{image:s.image,err:o}}async function N(t,e,a,r){let{res:i,ok:s}=await D("".concat(n,"/products/").concat(t),{name:e,price:a,description:r}),u=await i.json();return s?i.ok?{product:u,err:""}:""===await l()?await N(t,e,a,r):{product:u,err:c}:{product:u,err:o}}async function v(t){console.log(t);let{res:e,ok:a}=await B("".concat(n,"/products/").concat(t));return(await e.json(),a)?e.ok?"":""===await l()?await v(t):c:o}async function E(t,e,a,r){let c={};t&&(null==t?void 0:t.length)>5&&(c.username=t),e&&(c.email=e),r&&r.length>5&&(c.password=r),a&&(c.description=a),console.log(c);let{res:i,ok:s}=await D("".concat(n,"/users/main"),c),u=await i.json();if(!s)return{user:u,err:o};if(u.message)return{user:u,err:u.message};if(!i.ok){let n=await l();return""!==n?{user:u,err:n}:await E(t,e,a)}return{user:u,err:""}}async function P(t){let e=new FormData;e.append("file",t);let{res:a,ok:r}=await G("".concat(n,"/users/main/logo"),e),c=await a.json();if(!r)return{logo:c,err:o};if(!a.ok){let e=await l();return""!==e?{logo:c,err:e}:await P(t)}return{logo:c.logo,err:""}}async function A(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=x();return a==r?{res:await fetch(""),ok:!1}:{res:await fetch(t,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(a)},body:JSON.stringify(e)}),ok:!0}}async function B(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=x();return a==r?{res:await fetch(""),ok:!1}:{res:await fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(a)},body:JSON.stringify(e)}),ok:!0}}async function F(t){let e=x();return e==r?{res:await fetch(""),ok:!1}:{res:await fetch(t,{method:"GET",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(e)}}),ok:!0}}async function D(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=x();if(a==r)return{res:await fetch(""),ok:!1};let n=JSON.stringify(e);return{res:await fetch(t,{method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(a)},body:n}),ok:!0}}async function G(t,e){let a=x();return a==r?{res:await fetch(""),ok:!1}:{res:await fetch(t,{method:"PUT",headers:{Authorization:"Bearer ".concat(a)},body:e}),ok:!0}}async function J(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await fetch(t,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)})}async function K(t){return await fetch(t,{method:"GET",headers:{"Content-Type":"application/json;charset=utf-8"}})}function x(){let t=localStorage.getItem("access_token");return null!==t?t:r}}}]);